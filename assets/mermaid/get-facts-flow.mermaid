---
config:
  look: neo
  theme: redux
---

sequenceDiagram
    actor User
    participant LLM as AI Assistant
    participant Gateway as Gateway<br>[OpenProfile]
    participant FactPod as Site.com<br>[OpenProfile Fact Pod]

%% Step 1 - User request
    User->>LLM: "Recommend a body lotion for my skin"

%% Step 2 - Fetch available Fact Pods
    LLM->>Gateway: (1) getAvailableFactPods()
    Gateway-->>LLM: (2) List of Fact Pods + Categories

%% Step 3 - Select relevant categories and fetch facts
    LLM->>LLM: Select relevant categories
    LLM->>Gateway: (3) getFacts(selected categories)

%% Step 4 - Query Fact Pods for data
    Gateway->>FactPod: (4) Request facts (e.g. purchase history, preferences)
    FactPod-->>Gateway: (5) Return facts
    Gateway-->>LLM: (6) Provide available facts

%% Step 5 - Generate answer
    LLM->>LLM: Generate personalized recommendation
    LLM-->>User: Return answer tailored to skin type & preferences